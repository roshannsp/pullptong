
/*! Easy Roller v1.0 | http://22codes.com/ | requires jQuery JavaScript Library : https://jquery.com/ | Released under Codecanyon Standard license : https://codecanyon.net/licenses/standard  */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var r=window.eRoller||{};(r=function(){return function(r,t){var i,n=this;if(n.defaults={items:[],speed:8000,indicator:!0,key:"text",align:"h",itemPos:"center",easing:"default",to:"left"},i=e(r).data("eroller")||{},n.o=e.extend({},n.defaults,t,i),"object"!=typeof n.o.items||"object"==typeof n.o.items&&0===n.o.items.length)return n;n.o.direction="vertical"===e.trim(n.o.align)||"v"===e.trim(n.o.align)?"top"!==n.o.direction?"top":"bottom":"left"!==n.o.direction?"right":"left",n.initials={items:n.o.items,key:n.o.key,duplicate:8,groupWidth:0,groupHeight:0,firstHalf:0,gotowinner:null,winnerPos:null,speed:parseInt(n.o.speed,10)?parseInt(n.o.speed,10):8000,coutDur:null,currDur:0,spinning:!1,inProgress:!1,timer:!1,progress:!1,animating:!1,to:"bottom"===e.trim(n.o.direction)?"-":"left"===e.trim(n.o.direction)?"-":"",nonce:null,$el:e(r),$container:null,$game:null,winner:null,data:null,originClass:e(r).attr("class")},n.initials.easing={default:"cubic-bezier(0, 0, 0.28, 1)",linear:"cubic-bezier(0, 0, 1, 1)",easeInSine:"cubic-bezier(0.47, 0, 0.745, 0.715)",easeOutSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",easeInOutSine:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",easeInQuad:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",easeOutQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",easeInOutQuad:"cubic-bezier(0.455, 0.03, 0.515, 0.955)",easeInCubic:"cubic-bezier(0.55, 0.055, 0.675, 0.19)",easeOutCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1)",easeInQuart:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",easeOutQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",easeInOutQuart:"cubic-bezier(0.77, 0, 0.175, 1)",easeInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",easeOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",easeInOutQuint:"cubic-bezier(0.86, 0, 0.07, 1)",easeInExpo:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",easeOutExpo:"cubic-bezier(0.19, 1, 0.22, 1)",easeInOutExpo:"cubic-bezier(1, 0, 0, 1)",easeInCirc:"cubic-bezier(0.6, 0.04, 0.98, 0.335)",easeOutCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.15, 0.86)",easeInBack:"cubic-bezier(0.6, -0.28, 0.735, 0.045)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",easeInOutBack:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},e.extend(n,n.initials),n.init(),setTimeout(function(){n.$el.trigger("eroller.init")},100)}}()).prototype.destroy=function(r){var t=this;t.inProgress&&(t.inProgress=!1),t.clearAnimation(),t.$el.html(""),t.$el.attr("class",t.originClass),t.$el.removeClass("eroller"),e.extend(t.o,t.defaults),e.extend(t,t.initials),t.$el.off("eroller.start"),t.$el.off("eroller.stop"),t.$el.off("eroller.complete"),t.$el.off("eroller.progress"),t.$el.off("eroller.clear"),t.$el.off("eroller.finish"),t.$el.off("eroller.init")},r.prototype.option=function(r,t){var i=this;if(-1===e.inArray(typeof t,["undefined","function"])&&-1===e.inArray(typeof i.o[r],["undefined","function"])){var n=["easing","speed"];-1!=e.inArray(r,n)&&(i.o[r]=t)}},r.prototype.init=function(){var r=this;r.total=r.items.length,r.$el.html(""),r.$game=e('<div class="er-inner"></div>');var t=e('<div class="er-indicator"></div>');r.$container=e('<div class="er-container"></div>');var i=e('<div class="er-contents"></div>');r.$el.addClass("eroller"),r.$container.append(r.$game),i.append(r.$container),!0!==r.o.indicator&&"true"!==r.o.indicator||i.append(t),r.$el.append(i);for(var n=0,o="",a=0;a<r.total*r.duplicate;a++)n=a%r.total,o=void 0!==r.items[n].img||void 0!==r.items[n].image?" er-has-img":"",r.$game.append('<div class="er-item'+o+(void 0!==r.items[n].class?" "+r.items[n].class:"")+'" data-class="er-item '+(void 0!==r.items[n].class?r.items[n].class:"")+'">'+(void 0!==r.items[n].img?'<img src="'+r.items[n].img+'" />':void 0!==r.items[n].image?'<img src="'+r.items[n].image+'" />':"")+(void 0!==r.items[n][r.o.key]?"<span>"+r.items[n][r.o.key]+"</span>":"")+"</div>");if(0!==r.$game.find(">.er-item").length){var s=("vertical"===e.trim(r.o.align)||"v"===e.trim(r.o.align)?r.$game.find(">.er-item").eq(0).outerHeight(!0):r.$game.find(">.er-item").eq(0).outerWidth(!0))/2;r.firstHalf="-"===r.to?s:-s,r.$game.css({"-webkit-transform":r.matrix(r.to+r.firstHalf),"-moz-transform":r.matrix(r.to+r.firstHalf),"-ms-transform":r.matrix(r.to+r.firstHalf),"-o-transform":r.matrix(r.to+r.firstHalf),transform:r.matrix(r.to+r.firstHalf)}),r.rollTo(r.to,r.firstHalf)}for(a=0;a<r.total;a++)r.groupWidth+=r.$game.find(">.er-item").eq(a).outerWidth(!0),r.groupHeight+=r.$game.find(">.er-item").eq(a).outerHeight(!0);r.innerWidth=r.groupWidth*r.duplicate,r.innerHeight=r.groupHeight*r.duplicate,"vertical"===e.trim(r.o.align)||"v"===e.trim(r.o.align)?(r.$el.addClass("er-ver to-"+r.o.direction),r.$game.height(r.innerHeight).width("").css("margin-bottom",r.to+r.innerHeight/2+"px")):(r.$el.addClass("er-hor to-"+r.o.direction),r.$game.width(r.innerWidth).height("").css("margin-left",("-"===r.to?"":"-")+r.innerWidth/2+"px"))},r.prototype.start=function(e,r,t){var i=this;null!==i.$game&&(i.clearAnimation(),i.run(e,r,t))},r.prototype.stop=function(){var e=this,r=e.getTransform();e.clearAnimation(),e.$game.css({"-webkit-transition":"transform 0 ms ","-moz-transition":"transform 0 ms ","-ms-transition":"transform 0 ms ","-o-transition":"transform 0 ms ",transition:"transform 0 ms ","-webkit-transform":r,"-moz-transform":r,"-ms-transform":r,"-o-transform":r,transform:r}),e.$el.trigger("eroller.stop",e.data)},r.prototype.finish=function(){var e=this;null!==e.$game&&(e.progress&&clearInterval(e.progress),e.inProgress=!1,e.animating&&clearInterval(e.animating),e.timer&&clearTimeout(e.timer),e.coutDur&&clearInterval(e.coutDur),e.currDur=0,e.rollTo(e.to,e.gotowinner,0),e.$el.trigger("eroller.finish",e.data))},r.prototype.run=function(r,t,i){var n=this;if(n.animating&&clearInterval(n.animating),null!==n.$game&&!1===n.inProgress){if(n.winner=n.findValue(r,t),n.data=jQuery.extend(!0,{},n.items[n.winner]),void 0===n.winner)return void n.$el.trigger("eroller.fail");n.inProgress=!0,i=parseInt(i,10)?parseInt(i,10):n.speed,n.setCurrentspeed(),i-=n.currDur;for(var o=0,a=0;a<(""===n.to?n.items.length-n.winner:n.winner);a++)o+="vertical"===e.trim(n.o.align)||"v"===e.trim(n.o.align)?n.$game.find(">.er-item").eq(a).outerHeight(!0):n.$game.find(">.er-item").eq(a).outerWidth(!0);if("vertical"===e.trim(n.o.align)||"v"===e.trim(n.o.align)){var s=n.$game.find(">.er-item").eq(n.winner).outerHeight(!0),l=parseFloat(n.$game.find(">.er-item").eq(n.winner).css("margin-top").replace(/[^0-9.]/g,""))+parseFloat(n.$game.find(">.er-item").eq(n.winner).css("border-top-width").replace(/[^0-9.]/g,""))+2,m=parseFloat(n.$game.find(">.er-item").eq(n.winner).css("margin-bottom").replace(/[^0-9.]/g,"")+parseFloat(n.$game.find(">.er-item").eq(n.winner).css("border-bottom-width").replace(/[^0-9.]/g,"")))-2;s="-"===n.to?s:-s}else{var s=n.$game.find(">.er-item").eq(n.winner).outerWidth(!0),l=parseFloat(n.$game.find(">.er-item").eq(n.winner).css("margin-left").replace(/[^0-9.]/g,""))+parseFloat(n.$game.find(">.er-item").eq(n.winner).css("border-left-width").replace(/[^0-9.]/g,""))+2,m=parseFloat(n.$game.find(">.er-item").eq(n.winner).css("margin-right").replace(/[^0-9.]/g,"")+parseFloat(n.$game.find(">.er-item").eq(n.winner).css("border-right-width").replace(/[^0-9.]/g,"")))-2;s="-"===n.to?s:-s}n.gotowinner=o+("center"===n.o.itemPos?s/2:n.getRandomInt(l,s-m));var c="vertical"===e.trim(n.o.align)||"v"===e.trim(n.o.align)?n.innerHeight/2:n.innerWidth/2;n.winnerPos=c+n.gotowinner,n.$el.trigger("eroller.start");var u=void 0!==n.easing[n.o.easing]?n.easing[n.o.easing]:n.easing.default;n.rollTo(n.to,n.winnerPos,i,u),n.progress=setInterval(function(){n.$el.trigger("eroller.progress")},1),n.timer=setTimeout(function(){clearInterval(n.progress),clearInterval(n.coutDur),n.currDur=0,n.rollTo(n.to,n.gotowinner,0),n.inProgress=!1,n.$el.trigger("eroller.complete",n.data)},i)}},r.prototype.clear=function(){var e=this;e.clearAnimation(),e.$el.trigger("eroller.clear")},r.prototype.animate=function(r){var t=this;if(null!==t.$game){r=parseInt(r,10)?parseInt(r,10):t.speed,t.setCurrentspeed();var i=null!==t.winnerPos?t.winnerPos:t.firstHalf+4*("vertical"===e.trim(t.o.align)||"v"===e.trim(t.o.align)?t.groupHeight:t.groupWidth);t.rollTo(t.to,i,r),t.animating=setInterval(function(){t.rollTo(t.to,null!==t.gotowinner?t.gotowinner:t.firstHalf),t.$game.animate({to:0},{step:function(e,n){t.rollTo(t.to,i,r)}},"linear")},r)}},r.prototype.clearAnimation=function(){var e=this;null!==e.$game&&(e.progress&&clearInterval(e.progress),e.animating&&clearInterval(e.animating),e.timer&&clearTimeout(e.timer),e.coutDur&&clearInterval(e.coutDur),e.inProgress=!1,e.rollTo("",0,0))},r.prototype.setCurrentspeed=function(){var e=this,r=(new Date).getTime()-e.currDur;e.coutDur=setInterval(function(){var t=(new Date).getTime();e.currDur=t-r},1)},r.prototype.matrix=function(r){var t=this;return"vertical"===e.trim(t.o.align)||"v"===e.trim(t.o.align)?"matrix(1, 0, 0, 1, 0, "+r+")":"matrix(1, 0, 0, 1, "+r+",0)"},r.prototype.getTransform=function(){var e=this;return e.$game.css("-webkit-transform")||e.$game.css("-moz-transform")||e.$game.css("-ms-transform")||e.$game.css("-o-transform")||e.$game.css("transform")},r.prototype.rollTo=function(e,r,t,i){var n=this;e||(e=""),r||(r=0),t||(t=0),i||(i="linear"),n.$game.css({"-webkit-transition":"transform "+t+"ms "+i,"-moz-transition":"transform "+t+"ms "+i,"-ms-transition":"transform "+t+"ms "+i,"-o-transition":"transform "+t+"ms "+i,transition:"transform "+t+"ms "+i,"-webkit-transform":n.matrix(e+r),"-moz-transform":n.matrix(e+r),"-ms-transform":n.matrix(e+r),"-o-transform":n.matrix(e+r),transform:n.matrix(e+r)})},r.prototype.findValue=function(e,r){var t=this,i=void 0;if("object"==typeof t.items||"array"==typeof t.items){for(var n=0;n<t.items.length&&void 0!==t.items[n][e];n++)if(t.items[n][e]===r){i=n;break}return i}},r.prototype.getRandomInt=function(e,r){return Math.floor(Math.random()*(r-e+1)+e)},e.fn.eroller=function(){var t,i,n=this,o=arguments[0],a=Array.prototype.slice.call(arguments,1),s=n.length,l=["option","start","clear","finish","destroy","stop","animate"];for(t=0;t<s;t++)if("object"==typeof o||void 0===o?(n[t].eroller=new r(n[t],o),n[t].eroller.$el.trigger("eroller.init")):-1!==e.inArray(e.trim(o),l)&&(i=n[t].eroller[o].apply(n[t].eroller,a)),void 0!==i)return i;return n}});